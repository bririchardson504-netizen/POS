<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>POS</title>
  <link rel="manifest" href="manifest.webmanifest" />
  <link rel="stylesheet" href="styles.css?v=999" />
</head>
<body>
  <header class="topbar">
    <div class="logo">
      <div class="dot"></div>
      <div>
        <div class="title" id="restName">La Stella d’Oro</div>
        <div class="sub" id="roleBadge">Signed out</div>
      </div>
    </div>
    <div class="topActions">
      <button id="btnManagerPanel" class="chip" hidden>Manager</button>
      <button id="btnSignOut" class="chip" hidden>Sign out</button>
    </div>
  </header>

  <!-- LOGIN -->
  <main id="viewLogin" class="wrap">
    <section class="loginCard">
      <h1>Sign in</h1>
      <p class="muted">Tap a button, then use the on-screen keypad.</p>

      <div class="loginGrid">
        <div class="loginBox">
          <div class="loginLabel">Staff</div>
          <div class="pinRow">
            <input id="staffCode" class="pin" placeholder="Tap to enter" readonly />
            <button id="btnStaffKeypad" class="btn">Keypad</button>
          </div>
          <button id="btnStaff" class="btn primary">Sign in as Staff</button>
        </div>

        <div class="loginBox">
          <div class="loginLabel">Manager</div>
          <div class="pinRow">
            <input id="managerCode" class="pin" placeholder="Tap to enter" readonly />
            <button id="btnManagerKeypad" class="btn">Keypad</button>
          </div>
          <button id="btnManager" class="btn dark">Sign in as Manager</button>
        </div>
      </div>

      <div class="hint muted small">Default: Staff <code>1111</code> • Manager <code>9999</code></div>
    </section>
  </main>

  <!-- POS -->
  <main id="viewPos" class="wrap" hidden>
    <section class="posShell">
      <!-- LEFT: MENU -->
      <section class="panel">
        <div class="panelTop">
          <div class="panelTitle">Menu</div>
          <input id="menuSearch" class="search" placeholder="Search…" />
        </div>
        <div id="catBar" class="catBar"></div>
        <div id="menuGrid" class="tiles"></div>
      </section>

      <!-- RIGHT: TICKET -->
      <section class="panel ticketPanel">
        <div class="panelTop">
          <div class="panelTitle">Ticket</div>
          <div class="row">
            <select id="tableSelect" class="select">
              <option value="">No table</option>
              <option>Table 1</option><option>Table 2</option><option>Table 3</option><option>Table 4</option><option>Table 5</option>
              <option>Table 6</option><option>Table 7</option><option>Table 8</option><option>Table 9</option><option>Table 10</option>
              <option>To-go</option><option>Delivery</option>
            </select>
            <button id="btnNew" class="chip">New</button>
          </div>
        </div>

        <div id="ticketList" class="ticketList"></div>

        <div class="totals">
          <div class="trow"><span>Subtotal</span><span id="tSubtotal">$0.00</span></div>
          <div class="trow"><span>Discount</span><span id="tDiscount">$0.00</span></div>
          <div class="trow"><span>Tax</span><span id="tTax">$0.00</span></div>
          <div class="trow grand"><span>Total</span><span id="tTotal">$0.00</span></div>
        </div>

        <div class="bottomBar">
          <button id="btnQty" class="bbtn">Qty</button>
          <button id="btnDiscount" class="bbtn">Discount</button>
          <button id="btnComp" class="bbtn">Comp</button>
          <button id="btnVoid" class="bbtn danger">Void</button>
          <button id="btnReceipt" class="bbtn primary">Receipt</button>
        </div>

        <div id="toastMsg" class="toastMsg" hidden></div>
      </section>
    </section>
  </main>

  <!-- RECEIPT -->
  <main id="viewReceipt" class="wrap" hidden>
    <section class="receipt">
      <div class="center">
        <h2 id="rName">La Stella d’Oro</h2>
        <div id="rMeta" class="muted"></div>
      </div>
      <hr/>
      <div id="rItems"></div>
      <hr/>
      <div class="trow"><span>Subtotal</span><span id="rSubtotal"></span></div>
      <div class="trow"><span>Discount</span><span id="rDiscount"></span></div>
      <div class="trow"><span>Tax</span><span id="rTax"></span></div>
      <div class="trow grand"><span>Total</span><span id="rTotal"></span></div>
      <hr/>
      <div class="row gap noprint">
        <button id="btnBack" class="btn">Back</button>
        <button id="btnPrint" class="btn dark">Print</button>
      </div>
    </section>
  </main>

  <!-- MODS -->
  <dialog id="dlgMods" class="dlg">
    <form method="dialog" class="dlgBody">
      <div class="dlgTop">
        <strong id="modsTitle">Mods</strong>
        <button class="chip" value="close">Close</button>
      </div>
      <div id="modsBody" class="modsBody"></div>
      <div class="row gap">
        <button id="btnModsSave" class="btn dark" type="button">Save</button>
        <button id="btnModsClear" class="btn" type="button">Clear</button>
      </div>
    </form>
  </dialog>

  <!-- MANAGER PANEL -->
  <dialog id="dlgManager" class="dlg">
    <form method="dialog" class="dlgBody">
      <div class="dlgTop">
        <strong>Manager Tools</strong>
        <button class="chip" value="close">Close</button>
      </div>
      <div class="mgrGrid">
        <button id="btnMgrReopen" class="btn">Reopen Ticket</button>
        <button id="btnMgrClearDisc" class="btn">Clear Discount</button>
        <button id="btnMgrCompTicket" class="btn">Comp Ticket</button>
        <button id="btnMgrVoidTicket" class="btn danger">Void Ticket</button>
        <button id="btnMgrCompItem" class="btn">Comp Selected Item</button>
        <button id="btnMgrVoidItem" class="btn danger">Void Selected Item</button>
        <button id="btnMgrPriceOverride" class="btn">Price Override (Selected)</button>
      </div>
      <p class="muted small">Manager actions require manager code if you’re signed in as staff.</p>
    </form>
  </dialog>

  <!-- KEYPAD (no keyboard needed) -->
  <dialog id="dlgPad" class="dlg">
    <form method="dialog" class="dlgBody padBody">
      <div class="dlgTop">
        <strong id="padTitle">Keypad</strong>
        <button class="chip" value="close">Close</button>
      </div>
      <input id="padDisplay" class="padDisplay" readonly />
      <div class="padGrid" id="padGrid"></div>
      <div class="row gap">
        <button id="padClear" class="btn" type="button">Clear</button>
        <button id="padBack" class="btn" type="button">Back</button>
        <button id="padOk" class="btn primary" type="button">OK</button>
      </div>
    </form>
  </dialog>

  <script src="app.js?v=999" defer></script>
</body>
</html>
